## 本リポジトリについて

本リポジトリは、Recursionのバックエンドプロジェクト2の課題「Online Chat Messenger」のプログラムを作成するためのものです。

## 現状

ステージ2に対応したプログラムを作成しました。
機能要件を満たすために具体的に何をすればいいのかわからない箇所も多く、乱雑なプログラムになってしまいました。
もっと勉強して、できることが増えたら手直しをするかもしれません。

## 開発環境と試験環境

ubuntuをインストールしたRaspberry Pi 4Bでプログラムを作成し、同環境で想定したとおりに動作することを確認しました。

## ステージ1のプログラム実行時の流れ

1. ターミナルを3つ立ち上げて、そのうちの1つでserver.pyを、残り2つでclient.pyを起動する。
2. client.pyを起動したターミナルでユーザーネームを入力する。
3. server.pyがユーザーネームを受け取り、当該ユーザーのアドレスをクライアントリストに追加し、ユーザーがチャットに参加したことを各クライアントに伝える。
4. client.pyを起動したターミナルでメッセージを入力すると、サーバーを通じて各クライアントにメッセージが送信される。
5. client.pyを起動したターミナルで何も入力せずに60秒が経過するか、「q」と入力すると、チャットを終了することを伝えるメッセージをserver.pyに送信し、client.pyを終了する。
6. server.pyがclient.pyからの終了メッセージを受け取り、そのクライアントのユーザーが退出したことを各クライアントに伝える。

## ステージ2のプログラム実行時の流れ

1. ターミナルを3つ立ち上げて、そのうちの1つでserver.pyを、残り2つでclient.pyを起動する。
2. client.pyを起動したターミナルでチャットルーム名とユーザーネームを入力し、サーバーに送る（TCP通信）。
3. server.pyがユーザーネームを受け取り、当該ユーザーのトークンを生成してユーザーに送り返す（TCP通信）。
4. client.pyは受け取ったトークンを使ってUDP通信を行い、チャットルームに参加する（以下はすべてUDP通信）。
6. client.pyを起動したターミナルでメッセージを入力すると、サーバーを通じて各クライアントにメッセージが送信される。
7. client.pyを起動したターミナルで何も入力せずに60秒が経過するか、「q」と入力すると、チャットを終了することを伝えるメッセージをserver.pyに送信し、client.pyを終了する。
8. チャットを終了したクライアントがチャットルームのホストだった場合、server.pyがチャットルームを消去し、非ホストのクライアントにチャットの終了を伝える。

## 参考にした記事

本リポジトリのプログラムは、以下の記事や公開リポジトリを参考にしています。

https://qiita.com/mashed_potatoes/items/2338852a41c6aaf8efbb

https://github.com/ayan2809/Multi-Client-Socket-using-UDP

https://ittrip.xyz/python/python-udp-socket-guide

https://daeudaeu.com/tkinter_after/#after_cancel_after

https://qiita.com/komorin0521/items/e21fd1cb5f8e76895062

https://qiita.com/mile10032/items/f4c69297fc0ec6d82404
